<?xml version="1.0" encoding="UTF-8"?>
<!-- Grass Asset Definitions
     Flora assets for grass tiles and decorative grass.
     Uses GrassBlade generator for procedural Bezier curve shapes.
-->
<AssetDefinitions>
  <AssetDef>
    <defName>Flora_GrassBlade</defName>
    <label>Standard Grass Blade</label>
    <assetType>procedural</assetType>

    <generator>
      <name>GrassBlade</name>
      <params>
        <!-- Height in meters (savanna grass: 20-50cm) -->
        <heightRange>0.2,0.5</heightRange>
        <!-- Base width in meters (2-4cm) -->
        <widthRange>0.02,0.04</widthRange>
        <!-- Bend amount for wind (-1 to 1 range) -->
        <bendRange>-0.3,0.3</bendRange>
        <!-- Curve flattening tolerance (meters) -->
        <curveTolerance>0.01</curveTolerance>
      </params>
    </generator>

    <rendering>
      <!-- Simple = GPU instanced, Complex = individual tessellation -->
      <complexity>simple</complexity>
      <!-- Instanced = single template + GPU instancing -->
      <tier>instanced</tier>
      <!-- Number of mesh variants to pre-generate for visual variety -->
      <variantCount>1</variantCount>
    </rendering>

    <animation>
      <!-- Parametric = sin-based wind sway in vertex shader -->
      <type>parametric</type>
      <!-- How much wind affects this asset (0-1) -->
      <windResponse>0.4</windResponse>
      <!-- Animation speed range (cycles per second) -->
      <swayFrequency>0.5,1.0</swayFrequency>
    </animation>

    <!-- Per-biome placement configuration -->
    <!-- Each biome can have different spawn behavior -->
    <placement>
      <!-- Grassland: Dense, fairly uniform coverage -->
      <!-- Note: Clumped/spaced distributions not yet implemented - uses uniform random per-tile -->
      <biome name="Grassland">
        <spawnChance>0.5</spawnChance>  <!-- Increased to 50% to test thousands of grass blades -->
        <distribution>clumped</distribution>
        <clumping>
          <clumpSize>8,20</clumpSize>
          <clumpRadius>0.5,1.5</clumpRadius>
          <clumpSpacing>1,2</clumpSpacing>
        </clumping>
      </biome>

      <!-- Forest: Sparse, small clumps in clearings -->
      <biome name="Forest">
        <spawnChance>0.0003</spawnChance>
        <distribution>clumped</distribution>
        <clumping>
          <clumpSize>3,8</clumpSize>
          <clumpRadius>0.2,0.5</clumpRadius>
          <clumpSpacing>3,6</clumpSpacing>
        </clumping>
      </biome>

      <!-- Wetland: Moderate, taller grass in patches -->
      <biome name="Wetland">
        <spawnChance>0.0006</spawnChance>
        <distribution>clumped</distribution>
        <clumping>
          <clumpSize>5,12</clumpSize>
          <clumpRadius>0.3,0.8</clumpRadius>
          <clumpSpacing>2,4</clumpSpacing>
        </clumping>
      </biome>

      <!-- Groups this asset belongs to -->
      <groups>
        <group>grass</group>
        <group>small_flora</group>
        <group>ground_cover</group>
      </groups>

      <!-- Relationships with other entities -->
      <relationships>
        <!-- Grass has slight affinity for trees (grows in clearings around them) -->
        <affinity group="trees" distance="5.0" strength="1.2"/>
      </relationships>
    </placement>
  </AssetDef>
</AssetDefinitions>
